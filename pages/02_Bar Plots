import streamlit as st
from wordcloud import WordCloud
import matplotlib.pyplot as plt

st.sidebar.subheader("wordcloud plot Axis Selection")
st.markdown("# WORD CLOUD")
wordcloud_data  = st.session_state['df_wordcloud']

numeric_columns = wordcloud_data.columns
xaxis_col = st.sidebar.selectbox(label = 'Select column in x-axis', options = numeric_columns)


title = {
    'categories_list' : 'Book Categories',
    'authors_list' : 'Authors',
    'publisher' : 'Publishers'
    }

if xaxis_col in ['authors_list', 'categories_list', 'publisher']:
    dict_ = {}
    for val in wordcloud_data[xaxis_col]:
        if type(val) == str:
            if val not in dict_:
                dict_[val] = 1
            else:
                dict_[val] += 1
        
wordcloud = WordCloud(width=1600,
                    height=800,
                    background_color = 'silver',

                    ).generate_from_frequencies(frequencies=dict_)
st.write(title[xaxis_col])
plt.figure(figsize=(30,15))
plt.imshow(wordcloud)
plt.axis("off")
st.pyplot()